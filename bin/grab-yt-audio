#!/usr/bin/env bash
# grab-yt-audio - Download audio from a YouTube URL as MP3.
# Usage: grab-yt-audio <url>

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
# shellcheck source=lib/common.sh
source "$SCRIPT_DIR/lib/common.sh"

if [[ $# -eq 0 || "${1:-}" == "-h" || "${1:-}" == "--help" ]]; then
    echo "Usage: grab-yt-audio <url>"
    echo ""
    echo "Download audio from a YouTube URL as MP3."
    echo ""
    echo "Example: grab-yt-audio https://youtube.com/watch?v=..."
    exit 0
fi

require_command "yt-dlp" "brew install yt-dlp"

info "Downloading audio..."
yt-dlp -f 'ba' -x --audio-format mp3 -o "%(title)s.%(ext)s" "$1"
success "Download complete."
