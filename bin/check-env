#!/usr/bin/env bash

set -euo pipefail

printf "Running environment sanity checks...\n"

# Lint .zshrc for syntax errors
if [ -f "$HOME/.zshrc" ]; then
  printf "Linting .zshrc...\n"
  if zsh -n "$HOME/.zshrc"; then
    printf ".zshrc syntax is OK.\n"
  else
    printf ".zshrc syntax error!\n"
    exit 1
  fi
else
  printf "Skipping .zshrc lint, file not found.\n"
fi

printf "\nChecking for essential commands...\n"
commands_to_check="eza bat fd rg atuin mise"
for cmd in $commands_to_check; do
  if command -v "$cmd" >/dev/null 2>&1; then
    printf "- %s: found\n" "$cmd"
  else
    printf "- %s: NOT FOUND\n" "$cmd"
  fi
done

printf "\nEnvironment check complete.\n"

